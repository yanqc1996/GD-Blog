<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Object/Function-原型与原型链拓展 | 阿毛心怀宇宙</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/yqc-blog/login.png">
    <link rel="stylesheet" href="/yqc-blog/live2dModels/live2d/css/common.css">
    <script type="text/javascript" src="/yqc-blog/live2dModels/live2d/js/live2d.js"></script>
    <script type="text/javascript" src="/yqc-blog/live2dModels/live2d/js/init.js"></script>
    <meta name="description" content="阿毛的前端记录（项目参照整改中）">
    <link rel="preload" href="/yqc-blog/assets/css/0.styles.14f72f89.css" as="style"><link rel="preload" href="/yqc-blog/assets/js/app.936c05b0.js" as="script"><link rel="preload" href="/yqc-blog/assets/js/2.58a344da.js" as="script"><link rel="preload" href="/yqc-blog/assets/js/8.e504c3e0.js" as="script"><link rel="prefetch" href="/yqc-blog/assets/js/10.67c8aa54.js"><link rel="prefetch" href="/yqc-blog/assets/js/11.a5285db8.js"><link rel="prefetch" href="/yqc-blog/assets/js/12.88bfdda2.js"><link rel="prefetch" href="/yqc-blog/assets/js/13.217537c3.js"><link rel="prefetch" href="/yqc-blog/assets/js/14.7874ebd2.js"><link rel="prefetch" href="/yqc-blog/assets/js/15.ed6e759f.js"><link rel="prefetch" href="/yqc-blog/assets/js/16.62b22c8f.js"><link rel="prefetch" href="/yqc-blog/assets/js/17.8ffb4366.js"><link rel="prefetch" href="/yqc-blog/assets/js/18.e7fef13c.js"><link rel="prefetch" href="/yqc-blog/assets/js/19.5ef471c7.js"><link rel="prefetch" href="/yqc-blog/assets/js/20.a54ffb55.js"><link rel="prefetch" href="/yqc-blog/assets/js/21.709a71db.js"><link rel="prefetch" href="/yqc-blog/assets/js/3.88adac7e.js"><link rel="prefetch" href="/yqc-blog/assets/js/4.33cfba18.js"><link rel="prefetch" href="/yqc-blog/assets/js/5.e5483829.js"><link rel="prefetch" href="/yqc-blog/assets/js/6.cc4e8ad0.js"><link rel="prefetch" href="/yqc-blog/assets/js/7.f524fc69.js"><link rel="prefetch" href="/yqc-blog/assets/js/9.90ecd35b.js">
    <link rel="stylesheet" href="/yqc-blog/assets/css/0.styles.14f72f89.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/yqc-blog/" class="home-link router-link-active"><img src="/yqc-blog/login.png" alt="阿毛心怀宇宙" class="logo"> <span class="site-name can-hide">阿毛心怀宇宙</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/yqc-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yqc-blog/pages/develop-node/test1.html" class="nav-link">
  开发笔记
</a></li><li class="dropdown-item"><!----> <a href="/yqc-blog/pages/project-tools/test5.html" class="nav-link">
  项目常用工具
</a></li><li class="dropdown-item"><!----> <a href="/yqc-blog/pages/vue-node/vue生命周期详解.html" class="nav-link">
  Vue学习
</a></li><li class="dropdown-item"><!----> <a href="/yqc-blog/pages/react-node/React概括.html" class="nav-link">
  react学习
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/yanqc1996/yqc-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/yqc-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yqc-blog/pages/develop-node/test1.html" class="nav-link">
  开发笔记
</a></li><li class="dropdown-item"><!----> <a href="/yqc-blog/pages/project-tools/test5.html" class="nav-link">
  项目常用工具
</a></li><li class="dropdown-item"><!----> <a href="/yqc-blog/pages/vue-node/vue生命周期详解.html" class="nav-link">
  Vue学习
</a></li><li class="dropdown-item"><!----> <a href="/yqc-blog/pages/react-node/React概括.html" class="nav-link">
  react学习
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/yanqc1996/yqc-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>开发笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yqc-blog/pages/develop-node/array-dedup.html" class="sidebar-link">数组去重探究</a></li><li><a href="/yqc-blog/pages/develop-node/js-points.html" class="sidebar-link">js知识点整理</a></li><li><a href="/yqc-blog/pages/develop-node/svg-point.html" class="sidebar-link">svg基础知识</a></li><li><a href="/yqc-blog/pages/develop-node/原型与原型链.html" class="sidebar-link">原型与原型链</a></li><li><a href="/yqc-blog/pages/develop-node/Object_Function-原型与原型链拓展.html" class="active sidebar-link">Object/Function-原型与原型链拓展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yqc-blog/pages/develop-node/Object_Function-原型与原型链拓展.html#_1-instanceof" class="sidebar-link">1.instanceof</a></li><li class="sidebar-sub-header"><a href="/yqc-blog/pages/develop-node/Object_Function-原型与原型链拓展.html#_2-基本类型数据问题" class="sidebar-link">2.基本类型数据问题</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="object-function-原型与原型链拓展"><a href="#object-function-原型与原型链拓展" class="header-anchor">#</a> Object/Function-原型与原型链拓展</h1> <p><img src="https://user-gold-cdn.xitu.io/2020/6/16/172bc33e18ef5a4c?w=1508&amp;h=910&amp;f=png&amp;s=295568" alt="image.png"> <a name="SRbNP"></a></p> <h1 id="写在前面："><a href="#写在前面：" class="header-anchor">#</a> 写在前面：</h1> <p>我们先来回顾下上次关于原型这块留下的一些问题：<br>1.为什么Function，Object，构造函数Test的原型都是<code>Function.prototype</code>?<br>2.为什么<code>Function.__proto__</code>===<code>Function.prototype</code>?<br>3.为什么<code>Function.prototype</code>是一个函数，但是打印<code>Function.prototype.prototype</code>却是undefined？<br>本来想仔细去剖析一下原理，解释一下这是为啥，然后看到了<a href="https://zhuanlan.zhihu.com/p/22989691" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/22989691<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，感觉作者非常形象的解释一些可能比较难理解的问题，因此有些东西就不在这里做赘述了，小伙伴们可以去赞下这篇文章哈。
<a name="HEcww"></a></p> <h1 id="_1-object-function"><a href="#_1-object-function" class="header-anchor">#</a> 1.Object/Function</h1> <p>我们根据以上流程图，可以总结出Object和Function之间的一些关系：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token operator">===</span>Object<span class="token punctuation">.</span>__proto__
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token operator">===</span>Function<span class="token punctuation">.</span>__proto__
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token operator">===</span>Object<span class="token punctuation">.</span>prototye
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>同时，我们将这四块的思维导图单独拿出来整理下：<br><img src="https://user-gold-cdn.xitu.io/2020/6/16/172bc33e1a7faf1c?w=1058&amp;h=652&amp;f=png&amp;s=162067" alt="image.png"><br>一眼望去，以上思维导图确实混乱，尤其是流程流转的过程中，会给人一种循环混乱，不知道源头在哪的情况，因此我们先把其他的内容隐藏掉，只关注原型链：<br><img src="https://user-gold-cdn.xitu.io/2020/6/16/172bc33e1b8f775c?w=1064&amp;h=694&amp;f=png&amp;s=123373" alt="image.png"><br>这样是不是就清晰很多了，我们将图改为一种更加容易理解的结构：<br><img src="https://user-gold-cdn.xitu.io/2020/6/16/172bc33e1c7a74d7?w=778&amp;h=646&amp;f=png&amp;s=96413" alt="image.png"><br>这个流程图契合了我们之前对于原型链描述：原型链的尽头就是<code>Object.prototype</code><strong>(不考虑null的情况），所有对象都从</strong><code>Object.prototype</code><strong>继承</strong><code>toString()</code><strong>,</strong><code>valueOf()</code><strong>等公共属性。</strong></p> <p>根据上述流程整理，我们可以得出以下结论来判断初始化的顺序：先有<code>Object.prototype</code>（原型链顶端），<code>Function.prototype</code>继承<code>Object.prototype</code>而产生，同时，一切对象都继承自<code>Object.prototype</code>，而一切函数对象都继承自<code>Function.prototype</code>(且<code>Function.prototype</code>会最终继承自<code>Object.prototype</code>)，也就是说普通对象和函数对象的区别是：普通对象直接继承了<code>Object.prototype</code>，而函数对象在中间还继承了<code>Function.prototype</code>，<br>具体的创建流程还是可以参照：<a href="https://zhuanlan.zhihu.com/p/22989691" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/22989691<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a name="CKgdp"></a></p> <h1 id="_2-原型链拓展"><a href="#_2-原型链拓展" class="header-anchor">#</a> 2.原型链拓展</h1> <p><a name="JXDDd"></a></p> <h2 id="_1-instanceof"><a href="#_1-instanceof" class="header-anchor">#</a> 1.instanceof</h2> <p>涉及到原型，经常会需要解释以下这个问题：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>Function <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span><span class="token comment">//true</span>
Object <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>要理解这种情况的原因，我们首先需要理解<code>instanceof</code>运算符判断的是什么：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//假设instanceof运算符左边是L，右边是R</span>
<span class="token constant">L</span> <span class="token keyword">instanceof</span> <span class="token class-name">R</span> <span class="token comment">//instanceof运算时，通过判断L的原型链上是否存在R.prototype</span>
<span class="token constant">L</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">===</span> <span class="token class-name">R</span><span class="token punctuation">.</span>prototype ？ <span class="token comment">//如果存在返回true 否则返回false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>总结一下：<code>instanceof</code><strong>会递归查找运算符左边数据的原型链上，是否存在右侧的</strong><code>prototype</code><strong>原型</strong><br>我们根据思维导图可以进行判断：<br><code>Function.__proto__.__proto__===Object.prototype</code><br><code>Object.__proto__==Function.prototype</code><br>因此以上两个式子成立。<br> <br>PS：既然说到了<code>instanceof</code>，那就顺便来回顾下<code>typeof</code>：<br><code>typeof</code>原理： <strong>不同的对象在底层都表示为二进制，在Javascript中二进制前（低）三位存储其类型信息</strong></p> <ul><li>000: 对象</li> <li>010: 浮点数</li> <li>100：字符串</li> <li>110： 布尔</li> <li>1： 整数</li></ul> <p>由此我们可以解释，<code>typeof null</code>为什么是&quot;object&quot;：不同的对象在底层都表示为二进制，在Javascript中二进制前（低）三位都为0的话会被判断为Object类型，null的二进制表示全为0，自然前三位也是0，所以执行<code>typeof</code>时会返回&quot;object&quot;
<a name="SHYeV"></a></p> <h2 id="_2-基本类型数据问题"><a href="#_2-基本类型数据问题" class="header-anchor">#</a> 2.基本类型数据问题</h2> <p>基于以上<code>typeof</code>和<code>instanceof</code>的区别，我们又提出了一个问题：<br>基本数据类型有原型吗？思考一下，我们在工作中是都经常用到一些基本类型的方法，比如.length之类，那这些方法是从哪里继承的呢？<br>先在控制台打印以下的命令：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token comment">//两个小数点是因为数值后面调用方法，js会将点运算符解析为数值的小数点</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://user-gold-cdn.xitu.io/2020/6/16/172bc33e1d6a7833?w=1054&amp;h=250&amp;f=png&amp;s=46580" alt="image.png"></p> <p>再进行以下输出：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str<span class="token operator">=</span><span class="token string">'hello'</span>
<span class="token keyword">let</span> num<span class="token operator">=</span><span class="token number">1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token comment">//fasle</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num <span class="token keyword">instanceof</span> <span class="token class-name">Number</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>我们发现，如果根据<code>instanceof</code>之前的定义，<code>String.prototype</code>不在str的原型链上，那为什么输出基本类型的<code>__proto__</code>又会有指向呢？<br>这里就需要引入包装类型的概念了：为了便于操作基本类型值，<code>ECMAScript</code><strong>还提供了3个特殊的引用类型：</strong><code>Boolean</code><strong>,</strong><code>Number</code><strong>和</strong><code>String</code><strong>。这些类型与其他引用类型相似，但同时也具有各自的基本类型相应的特殊行为。</strong><br><strong>引用类型和包装类型的主要区别就是对象的生存期，使用new操作符创建的引用类型的实例，在执行流离开当前作用域之前都一直保存在内存中，而包装类型则只存在于一行代码的执行瞬间，然后立即被销毁，这意味着我们不能在运行时为基本类型添加属性和方法。</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str<span class="token operator">=</span><span class="token string">'hello'</span>
str<span class="token punctuation">.</span>say<span class="token operator">=</span><span class="token string">'world'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>say<span class="token punctuation">)</span><span class="token comment">//undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>同时，我们还需要引出装箱和拆箱的概念：</p> <ul><li><strong>装箱：把基本类型转换为对应的包装类型</strong><br></li> <li><strong>拆箱：把引用类型转换为基本类型</strong></li></ul> <p>结合以上概念，我们就可以解释上述问题了：每当我们操作一个基础类型的时候，JS就会自动创建一个包装类型的对象，从而让我们能够调用一些方法和属性。我们在创建基本类型并调用方法的时候，其实发生了以下几个步骤：1.创建一个包装类型实例  2.在实例上调用方法  3.销毁实例<br>也就是说，我们使用基本类型调用方法，就会自动进行装箱和拆箱操作<br>因此，我们调用基本类型的__proto__方法时，就会将基本类型自动转换成包装类型，因此会有原型指向，而我们使用instanceof方法时，不使用基本类型调用方法，判断的就是基本类型，因此为false。<br> <br>以上，我们完善了部分原型和原型链的概念扩展。同时，从中发现对于JS基础的数据类型这一块还存在还有一些盲点，那么下一篇我们就针对js基本的数据类型进行一些深入研究。<br></p> <p><a name="NCfDU"></a></p> <h1 id="写在最后："><a href="#写在最后：" class="header-anchor">#</a> 写在最后：</h1> <p><strong>文章中很多个人的理解可能比较浅显，如果文章中有哪些概念有偏差或者错误的麻烦大家不吝指正哈！一起学习一起进步</strong></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/yqc-blog/pages/develop-node/原型与原型链.html" class="prev">
        原型与原型链
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/yqc-blog/assets/js/app.936c05b0.js" defer></script><script src="/yqc-blog/assets/js/2.58a344da.js" defer></script><script src="/yqc-blog/assets/js/8.e504c3e0.js" defer></script>
  </body>
</html>
